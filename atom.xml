<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Teams Six</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.teamssix.com/"/>
  <updated>2019-06-14T03:00:30.656Z</updated>
  <id>http://www.teamssix.com/</id>
  
  <author>
    <name>Teams Six</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【Python实例】批量下载斗罗大陆高清视频</title>
    <link href="http://www.teamssix.com/year/190613-191825.html"/>
    <id>http://www.teamssix.com/year/190613-191825.html</id>
    <published>2019-06-13T11:18:25.000Z</published>
    <updated>2019-06-14T03:00:30.656Z</updated>
    
    <content type="html"><![CDATA[<h1 id="0x00-下载视频下载脚本"><a href="#0x00-下载视频下载脚本" class="headerlink" title="0x00 下载视频下载脚本"></a>0x00 下载视频下载脚本</h1><p>首先来到我的<a href="http://www.github.com/teamssix/" target="_blank" rel="noopener">Github主页</a>，找到Douluo-download项目，点开找到<a href="https://github.com/teamssix/Douluo-download.git" target="_blank" rel="noopener">下载地址</a>，使用git clone对其进行下载</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/teamssix/Douluo-download.git</span><br></pre></td></tr></table></figure><p><img src="https://uploader.shimo.im/f/XJxbTxPGQa46860t.png!thumbnail" alt="图片"></p><a id="more"></a><h1 id="0x01-安装python所需要的库"><a href="#0x01-安装python所需要的库" class="headerlink" title="0x01 安装python所需要的库"></a>0x01 安装python所需要的库</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd Douluo-download/</span><br><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><p><img src="https://uploader.shimo.im/f/q43Gc1gCXJkiIQpR.png!thumbnail" alt="图片"></p><h1 id="0x02-执行Python程序"><a href="#0x02-执行Python程序" class="headerlink" title="0x02 执行Python程序"></a>0x02 执行Python程序</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 douluo.py</span><br></pre></td></tr></table></figure><p><img src="https://uploader.shimo.im/f/nI2bdVKTtHslCfrT.png!thumbnail" alt="图片"><br>程序在执行的时候会感觉比较慢，其实不是卡了，而是程序正在下载视频，当下载好一个视频才会弹出一条信息。</p><h1 id="0x03-查看成果"><a href="#0x03-查看成果" class="headerlink" title="0x03 查看成果"></a>0x03 查看成果</h1><p>执行ls命令可以看到刚才下载的视频<br><img src="https://uploader.shimo.im/f/nCG37JLMETQOq6Wx.png!thumbnail" alt="图片"><br>播放看看能不能正常播放<br><img src="https://uploader.shimo.im/f/LJz6vP00MMM52rA5.png!thumbnail" alt="图片"><br>可以看到是可以正常播放的，不过我想试试最新的一集，也就是看看需要会员的视频能不能下载下来，当前最新的一集是55集，那我们下载试试。</p><h1 id="0x04-继续尝试下载VIP视频"><a href="#0x04-继续尝试下载VIP视频" class="headerlink" title="0x04 继续尝试下载VIP视频"></a>0x04 继续尝试下载VIP视频</h1><p>知道下载那一集后还需要修改一下代码才行，将原来下载视频的代码简单做一下修改就行<br><img src="https://uploader.shimo.im/f/sEBuSj5TEWEag1KH.png!thumbnail" alt="图片"><br>执行看看<br><img src="https://uploader.shimo.im/f/nwtE79zjsfsqEpat.png!thumbnail" alt="图片"><br>看来不行，只能下载到预告片，接下来就对代码就行简单的介绍吧</p><h1 id="0x05-代码简单介绍"><a href="#0x05-代码简单介绍" class="headerlink" title="0x05 代码简单介绍"></a>0x05 代码简单介绍</h1><h2 id="1、第一部分：导入库设定变量"><a href="#1、第一部分：导入库设定变量" class="headerlink" title="1、第一部分：导入库设定变量"></a>1、第一部分：导入库设定变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#导入库设定变量</span><br><span class="line">import os</span><br><span class="line">import requests</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">headers = &#123;&apos;User-Agent&apos;:&apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.75 Safari/537.36&apos;&#125;</span><br><span class="line">home_url =&apos;https://v.qq.com/x/cover/m441e3rjq9kwpsc/m00253deqqo.html&apos;</span><br></pre></td></tr></table></figure><p>这部分就是导入一些库和一些设定的变量什么的，比如headers、url什么的，没什么好说的</p><h2 id="2、第二部分：爬取每个视频的id"><a href="#2、第二部分：爬取每个视频的id" class="headerlink" title="2、第二部分：爬取每个视频的id"></a>2、第二部分：爬取每个视频的id</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#爬取每个视频的id</span><br><span class="line">douluohome = requests.get(home_url,headers=headers)</span><br><span class="line">douluohome.encoding=&apos;utf-8&apos;</span><br><span class="line">douluosoup = BeautifulSoup(douluohome.text,&apos;html.parser&apos;)</span><br><span class="line">douluolist = douluosoup.select(&apos;.mod_episode&apos;)[0].select(&apos;a&apos;)</span><br></pre></td></tr></table></figure><p>这里用到了BeautifulSoup4库，先requets获取页面信息，用BeautifulSoup4去对页面html进行解析，最后找到我们想要的东西，这里是清洗出每个视频的ID</p><h2 id="3、第三部分：合成下载链接"><a href="#3、第三部分：合成下载链接" class="headerlink" title="3、第三部分：合成下载链接"></a>3、第三部分：合成下载链接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#合成下载链接</span><br><span class="line">lists = []</span><br><span class="line">for i in range(len(douluolist)):</span><br><span class="line">    lists.append(&apos;https://v.qq.com&apos;+douluolist[i][&apos;href&apos;])</span><br></pre></td></tr></table></figure><p>很简单的一个处理，将上一步获取的视频的id加到v.qq.com后面，生成视频的播放链接</p><h2 id="4、第四部分：开始下载视频"><a href="#4、第四部分：开始下载视频" class="headerlink" title="4、第四部分：开始下载视频"></a>4、第四部分：开始下载视频</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#开始下载视频</span><br><span class="line">for i in range(len(lists)):</span><br><span class="line">    try:</span><br><span class="line">        print(os.popen(&apos;you-get &#123;&#125;&apos;.format(lists[i])).read()) #视频会下载到当前目录</span><br><span class="line">    except:</span><br><span class="line">        pass</span><br><span class="line">    continue</span><br></pre></td></tr></table></figure><p>这部分其实也没有什么东西，有了每个视频的播放链接后，直接使用工具就可以下载了，这里使用的是利用os库调用you-get命令进行下载的，最后将you-get命令的显示结果传回终端。</p><h1 id="0x06-总结"><a href="#0x06-总结" class="headerlink" title="0x06 总结"></a>0x06 总结</h1><p>总的说来，其实Python主要就是起到爬虫作用，爬取每个视频的播放链接，最后使用you-get对视频进行下载，没有什么太大的难度，所以权当练练手了。</p><p>下面为视频演示：</p><!--<iframe src="//player.bilibili.com/player.html?aid=55224540&cid=96981660&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>--><!--<p align = "center"><iframe height=auto width=100% src="//player.bilibili.com/player.html?aid=55224540&cid=96981660&page=1"></iframe></p>--><p align="center"><iframe src="//player.bilibili.com/player.html?aid=55224540&cid=96981660&page=1" width="780" height="480" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></p><!--<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=55224540&cid=96981660&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div>--><p>如果视频不能全屏播放，请点击<a href="https://www.bilibili.com/video/av55224540/" title="源链接" target="_blank" rel="noopener">源链接</a>观看</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;0x00-下载视频下载脚本&quot;&gt;&lt;a href=&quot;#0x00-下载视频下载脚本&quot; class=&quot;headerlink&quot; title=&quot;0x00 下载视频下载脚本&quot;&gt;&lt;/a&gt;0x00 下载视频下载脚本&lt;/h1&gt;&lt;p&gt;首先来到我的&lt;a href=&quot;http://www.github.com/teamssix/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Github主页&lt;/a&gt;，找到Douluo-download项目，点开找到&lt;a href=&quot;https://github.com/teamssix/Douluo-download.git&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;下载地址&lt;/a&gt;，使用git clone对其进行下载&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git clone https://github.com/teamssix/Douluo-download.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&quot;https://uploader.shimo.im/f/XJxbTxPGQa46860t.png!thumbnail&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="实例演示" scheme="http://www.teamssix.com/categories/%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA/"/>
    
    
      <category term="Python" scheme="http://www.teamssix.com/tags/Python/"/>
    
      <category term="斗罗大陆" scheme="http://www.teamssix.com/tags/%E6%96%97%E7%BD%97%E5%A4%A7%E9%99%86/"/>
    
      <category term="GitHub" scheme="http://www.teamssix.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>为自定义域名的Hexo博客升级到Https网站</title>
    <link href="http://www.teamssix.com/year/191612-123700.html"/>
    <id>http://www.teamssix.com/year/191612-123700.html</id>
    <published>2019-06-12T04:37:00.000Z</published>
    <updated>2019-06-12T08:18:58.606Z</updated>
    
    <content type="html"><![CDATA[<h1 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h1><p>一把小绿锁，增加安全与安全感。cloudflare 是一家国外的CDN加速服务商，我们可以用它来把我们的网站升级到https，同时还能够提高网站的访问速度。<br>如果在设置的过程中，因为网站太多英文而困扰，可以利用浏览器的一些插件进行翻译，比如Chrome自带的翻译。<br>我使用的域名提供商是namesilo，博客工具是hexo，在网上找到很多教程都是用的Github官方提供的升级到https的教程，要不就是各种命令，然后按照教程去配置就各种依赖报错，十分心累。<br>本文配置过程中，没有涉及到命令的地方，利用CloudFlare配置https，整体体验还是很是很不错的，而且还能一定程度上的伪装自己的真实IP地址，废话不多说，下面就开整吧。</p><a id="more"></a><h1 id="0x01-注册CloudFlare"><a href="#0x01-注册CloudFlare" class="headerlink" title="0x01 注册CloudFlare"></a>0x01 注册<strong>CloudFlare</strong></h1><p>打开注册地址<a href="https://dash.cloudflare.com/sign-up" target="_blank" rel="noopener">https://dash.cloudflare.com/sign-up</a>，输入邮箱和密码，对于下面是否接收广告的选项我是取消勾选，可以自行选择，勾选了平时邮箱会接收到来自CloudFlare的广告。<br><img src="https://uploader.shimo.im/f/08xM20osdY8mEG4S.png!thumbnail" alt="图片"><br>此时邮箱会收到验证邮件，点击Verify email按钮，跳转到登陆界面，输入正确的账号密码后，才算是验证成功。<br><img src="https://uploader.shimo.im/f/pAqoL3lxwXUgtNzH.png!thumbnail" alt="图片"></p><h1 id="0x02-添加配置网站"><a href="#0x02-添加配置网站" class="headerlink" title="0x02 添加配置网站"></a>0x02 添加配置网站</h1><p>回到Cloudflare页面，输入自己的域名<br><img src="https://uploader.shimo.im/f/4ttl2H54YhQfQ7GJ.png!thumbnail" alt="图片"><br>网页提示正在查询你的DNS记录，点击Next<br><img src="https://uploader.shimo.im/f/5n24btmJeQc6qUHe.png!thumbnail" alt="图片"><br>这里我选择0元/月，也就是免费的，具体每个Plan是什么意思，可以看下面翻译后的图片，选择后之后，点击Confirm plan<br><img src="https://uploader.shimo.im/f/HL5b17EE0AIYGYkU.png!thumbnail" alt="图片"><br><img src="https://uploader.shimo.im/f/5EoJQ4eD7WQUMRZD.png!thumbnail" alt="图片"><br>弹出提示信息，问我们是否确认购买这个plan，我们直接确认，点击Confirm<br><img src="https://uploader.shimo.im/f/EG3KZF4ocS8oe3Mj.png!thumbnail" alt="图片"><br>将所有DNS记录删除，添加类型为A，Name为www，Value为你的IP地址，TTL为自动的一条记录后，点击Continue<br><img src="https://uploader.shimo.im/f/VaYQkRHlh0sgkXHY.png!thumbnail" alt="图片">接下来需要修改你的域名服务器，这就需要到你购买域名的地方去修改了，我的域名是在namesilo购买的，因此这里以namesilo为例。<br>这里可以先把下图中红色框中的内容先复制下来。<br><img src="https://uploader.shimo.im/f/55ZlCXHVJ2kFQNtz.png!thumbnail" alt="图片"></p><h1 id="0x03-配置域名服务器"><a href="#0x03-配置域名服务器" class="headerlink" title="0x03 配置域名服务器"></a>0x03 配置域名服务器</h1><p>打开自己购买域名的地方，这里我打开的是namesilo官网，对于其他域名网站都类似，具体配置域名服务器的教程可以谷歌之。<br>进入官网登陆后，点击Manage My Domains<br><img src="https://uploader.shimo.im/f/PgFVgifWXXUmTZTr.png!thumbnail" alt="图片"><br>选择需要修改的域名后，点击Change Nameservers，namesilo默认有3个Nameservers，我这里之前已经修改过了，所以NameServers栏中会和默认的不一样。<br><img src="https://uploader.shimo.im/f/JkVhCFgxAO81KGK3.png!thumbnail" alt="图片"><br>先将原来信息删除，将上面复制的内容逐一复制进去即可，点击SUBMIT，这里因为我已经修改过了，因此界面会显示不大一样。<br><img src="https://uploader.shimo.im/f/wIGtkmQfFmgQaWp3.png!thumbnail" alt="图片"><br>回到CloudFlasre页面，点击Continue，跳转到以下界面，稍等一段时间，来到namesilo查看配置进度<br><img src="https://uploader.shimo.im/f/za8z1Th1y484fWVb.png!thumbnail" alt="图片"><br>下面Status显示Active说明域名服务器就已经配置好了。<br><img src="https://uploader.shimo.im/f/2tv979qn6Fgl35Xr.png!thumbnail" alt="图片"><br><img src="https://uploader.shimo.im/f/5u5HZKUzmDISW6Rb.png!thumbnail" alt="图片"></p><h1 id="0x04-配置SSL"><a href="#0x04-配置SSL" class="headerlink" title="0x04 配置SSL"></a>0x04 配置SSL</h1><p>来到Crypto，点击using SSl<br><img src="https://uploader.shimo.im/f/3WKVOE5IHxYDyRoP.png!thumbnail" alt="图片"><br>点击Sign up<img src="https://uploader.shimo.im/f/cUNXuT0jypo57t7h.png!thumbnail" alt="图片"><br>跳转到如下界面<br><img src="https://uploader.shimo.im/f/7ETxZn0N5mEEUuyF.png!thumbnail" alt="图片"><br>等待一段时间，少则几十分钟一个小时，多则24小时，见到下面红色框内容出现，说明SSl配置就成功了<br><img src="https://uploader.shimo.im/f/8mGr3hEksdsH26TI.png!thumbnail" alt="图片"><br>此时登陆我们的域名就可以看到高贵的安全锁标志了。<br><img src="https://uploader.shimo.im/f/UoCFiC2tesQvKz5P.png!thumbnail" alt="图片"></p><h1 id="0x05-设置Always-Use-HTTPS规则"><a href="#0x05-设置Always-Use-HTTPS规则" class="headerlink" title="0x05 设置Always Use HTTPS规则"></a>0x05 设置Always Use HTTPS规则</h1><p>虽然设置了http，但是发现输入域名还是会自动以http协议连接，因此我们来到Page Rules添加一下规则。<br><img src="https://uploader.shimo.im/f/qtCZkUTz2y8z2spC.png!thumbnail" alt="图片"><br>第一个框填写自己的域名，接着选择Always Use HTTPS，点击Save and Deploy。<br><img src="https://uploader.shimo.im/f/ss8Eh10LGy0SZsEg.png!thumbnail" alt="图片"><br>同样需要等待一段时间，输入自己域名后就可以发现可以直接跳转到https了。</p><h1 id="0x06-总结"><a href="#0x06-总结" class="headerlink" title="0x06 总结"></a>0x06 总结</h1><p>除此之外在宝塔上配置https也是很方便的，不过因为担心宝塔配置Web的过程中安装的LNMP什么的和本地一些已经安装好的环境发生冲突，最后还是没有继续选择使用宝塔，于是在网上查找了很多将http升级为https的方法，但基本都是用的国内的云，都有自带的证书服务，并不适用于我的情况，最后看到这篇文章：<a href="https://zhouhengheng.com/%E5%AE%9E%E7%8E%B0Hexo%E5%8D%9A%E5%AE%A2%E4%BB%8EHTTP%E5%88%B0HTTPS%E5%8A%A0%E5%AF%86.html" target="_blank" rel="noopener">https://zhouhengheng.com/%E5%AE%9E%E7%8E%B0Hexo%E5%8D%9A%E5%AE%A2%E4%BB%8EHTTP%E5%88%B0HTTPS%E5%8A%A0%E5%AF%86.html</a>，不过写的比较简陋，于是结合这篇文章以及自己的摸索，记录下这篇文章。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;0x00-前言&quot;&gt;&lt;a href=&quot;#0x00-前言&quot; class=&quot;headerlink&quot; title=&quot;0x00 前言&quot;&gt;&lt;/a&gt;0x00 前言&lt;/h1&gt;&lt;p&gt;一把小绿锁，增加安全与安全感。cloudflare 是一家国外的CDN加速服务商，我们可以用它来把我们的网站升级到https，同时还能够提高网站的访问速度。&lt;br&gt;如果在设置的过程中，因为网站太多英文而困扰，可以利用浏览器的一些插件进行翻译，比如Chrome自带的翻译。&lt;br&gt;我使用的域名提供商是namesilo，博客工具是hexo，在网上找到很多教程都是用的Github官方提供的升级到https的教程，要不就是各种命令，然后按照教程去配置就各种依赖报错，十分心累。&lt;br&gt;本文配置过程中，没有涉及到命令的地方，利用CloudFlare配置https，整体体验还是很是很不错的，而且还能一定程度上的伪装自己的真实IP地址，废话不多说，下面就开整吧。&lt;/p&gt;
    
    </summary>
    
      <category term="经验总结" scheme="http://www.teamssix.com/categories/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Hexo" scheme="http://www.teamssix.com/tags/Hexo/"/>
    
      <category term="Https" scheme="http://www.teamssix.com/tags/Https/"/>
    
      <category term="CloudFlare" scheme="http://www.teamssix.com/tags/CloudFlare/"/>
    
      <category term="Namesilo" scheme="http://www.teamssix.com/tags/Namesilo/"/>
    
  </entry>
  
</feed>
